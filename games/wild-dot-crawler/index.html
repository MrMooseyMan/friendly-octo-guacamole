<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Wild Dot Crawler</title>
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <main class="app" aria-label="Wild Dot Crawler">
    <header class="topbar">
      <div class="title">
        <div class="game-name">ğŸº Wild Dot Crawler</div>
        <div class="sub">Chain tiles â€¢ Slay enemies â€¢ Climb floors!</div>
      </div>

      <div class="stats" aria-label="Stats">
        <div class="stat hp-stat">
          <span class="k">â¤ï¸ HP</span>
          <div class="hp-bar-wrap">
            <div id="hpBar" class="hp-bar" style="width: 100%"></div>
            <span id="hpText" class="hp-text">10/10</span>
          </div>
        </div>
        <div class="stat"><span class="k">ğŸ›¡ï¸</span> <span id="shieldText" class="v">0</span></div>
        <div class="stat"><span class="k">â­</span> <span id="scoreText" class="v">0</span></div>
        <div class="stat floor-stat"><span class="k">ğŸ° Floor</span> <span id="floorText" class="v">1</span></div>
      </div>
    </header>

    <section class="boardWrap">
      <canvas id="game" width="640" height="640" aria-label="Game board"></canvas>
      
      <!-- Action Preview Tooltip -->
      <div id="actionPreview" class="action-preview hidden">
        <span id="actionText">Attack 5</span>
      </div>

      <!-- Floor Progress -->
      <div class="floor-progress">
        <span id="floorProgressText" class="floor-progress-text">0/5 enemies</span>
        <div class="floor-bar-bg">
          <div id="floorBar" class="floor-bar-fill" style="width: 0%"></div>
        </div>
      </div>

      <!-- Surge UI -->
      <div class="surge-container">
        <div class="surge-bar-bg">
          <div id="surgeBar" class="surge-bar-fill" style="width: 0%"></div>
        </div>
        <button id="surgeBtn" class="btn surge-btn" disabled>âš¡ SURGE!</button>
      </div>

      <div id="overlay" class="overlay" role="dialog" aria-modal="true" aria-label="Help">
        <div class="card">
          <h1 id="overlayTitle">How to play</h1>
          <p id="overlayMessage" class="overlayMsg"></p>
          <ul id="overlayHelp">
            <li><b>ğŸ¯ Goal:</b> Survive floors by killing enemies!</li>
            <li><span class="sw s-sword"></span> <b>Sword âš”ï¸</b>: Chain with enemies to attack them.</li>
            <li><span class="sw s-potion"></span> <b>Heart â¤ï¸</b>: Restore your HP.</li>
            <li><span class="sw s-shield"></span> <b>Shield ğŸ›¡ï¸</b>: Block incoming damage.</li>
            <li><span class="sw s-coin"></span> <b>Gold ğŸ’°</b>: Score points & charge Surge.</li>
            <li><span class="sw s-enemy"></span> <b>Skull ğŸ’€</b>: Enemies attack you each turn!</li>
            <li><span class="sw s-wild"></span> <b>Wild âœ¨</b>: Matches anything! (Rare)</li>
            <li>ğŸ”¥ <b>Longer chains = bigger bonuses!</b></li>
          </ul>
          <div class="row">
            <button id="startBtn" class="btn primary">Start Run</button>
            <button id="closeHelpBtn" class="btn">Close</button>
          </div>
          <p class="hint">ğŸ’¡ 4+ tiles = 25% bonus â€¢ 5+ = 50% â€¢ 6+ = 100%!</p>
        </div>
      </div>
    </section>

    <section class="controls" aria-label="Controls">
      <div class="buttons">
        <button id="newBtn" class="btn">New Run</button>
        <button id="helpBtn" class="btn">Help (?)</button>
      </div>
      <!-- Log removed or simplified? Let's keep a small log if needed, or remove it for cleanliness. 
           The prompt mentions "easier to understand", visuals are better than logs. 
           I'll keep a minimal log but maybe hide it or style it smaller.
           Actually, let's keep it but make it small. -->
      <div class="log" style="display:none;"> <!-- Hidden by default, maybe use for debugging or critical info -->
        <div id="log" class="logBody"></div>
      </div>
    </section>
  </main>

  <script src="./game.js"></script>
</body>
</html>
